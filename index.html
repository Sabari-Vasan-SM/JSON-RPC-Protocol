<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON-RPC Time Client</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f7ff',
                            100: '#ebf0ff',
                            500: '#667eea',
                            600: '#5568d3',
                            700: '#4c5fc7',
                        },
                        secondary: {
                            500: '#764ba2',
                            600: '#6a4391',
                        }
                    },
                    animation: {
                        'spin-slow': 'spin 0.8s linear infinite',
                    }
                }
            }
        }
    </script>
    
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .spinner {
            width: 12px;
            height: 12px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-5 gradient-primary">
    <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full p-10 transform transition-all duration-300 hover:shadow-3xl">
        <!-- Header -->
        <h1 class="text-4xl font-bold text-gray-800 text-center mb-2">JSON-RPC Time Client</h1>
        <p class="text-center text-gray-600 mb-8 text-sm">Communicate with the JSON-RPC 2.0 Time Server</p>

        <!-- Info Section -->
        <div class="bg-gray-50 border-l-4 border-primary-500 rounded-lg p-4 mb-6">
            <p class="text-gray-700 text-sm mb-1">
                <strong class="font-semibold">Server Endpoint:</strong> 
                <span class="text-primary-600">http://localhost:3000/rpc</span>
            </p>
            <p class="text-gray-700 text-sm mb-1">
                <strong class="font-semibold">Protocol:</strong> 
                <span class="text-primary-600">JSON-RPC 2.0</span>
            </p>
            <p class="text-gray-500 text-xs mt-2">
                Last request: <span id="lastRequest" class="font-medium">None</span>
            </p>
        </div>

        <!-- Action Buttons -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <button 
                onclick="callRPC('getCurrentTime')"
                class="gradient-primary text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none disabled:bg-gradient-to-r disabled:from-gray-400 disabled:to-gray-600">
                Get Current Time
            </button>
            <button 
                onclick="callRPC('getTimeZone')"
                class="gradient-primary text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none disabled:bg-gradient-to-r disabled:from-gray-400 disabled:to-gray-600">
                Get Time Zone
            </button>
            <button 
                onclick="callRPC('getUnixTimestamp')"
                class="gradient-primary text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none disabled:bg-gradient-to-r disabled:from-gray-400 disabled:to-gray-600">
                Get Unix Timestamp
            </button>
        </div>

        <!-- Clear Button -->
        <button 
            onclick="clearResponse()"
            class="gradient-secondary text-white font-semibold py-3 px-6 rounded-lg w-full mt-4 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg active:translate-y-0">
            Clear Response
        </button>

        <!-- Loading Indicator -->
        <div id="loading" class="hidden text-center text-primary-500 font-semibold my-5">
            <span class="spinner"></span>Loading...
        </div>

        <!-- Response Container -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-5 mt-6 min-h-[120px]">
            <div class="text-primary-500 font-semibold mb-3 text-sm">Server Response</div>
            <div id="responseContent" class="bg-white border border-gray-200 rounded p-4 font-mono text-xs leading-relaxed text-gray-800 max-h-[300px] overflow-y-auto whitespace-pre-wrap break-all empty:text-center empty:text-gray-400 empty:py-10">
                Click a button to send a request to the server
            </div>
        </div>
    </div>

    <!-- Load external JavaScript files -->
    <script src="utils.js"></script>
    <script src="client.js"></script>
    
    <script>
        /*
         * Main Application Script
         * The heavy lifting is done by client.js - this just provides simple wrappers
         * for the button click handlers in the HTML
         */
        
        // Note: The main callRPC, clearResponse, and other functions
        // are defined in client.js and are available globally
        
        console.log('âœ… Application initialized');
        console.log('ðŸ“¦ Loaded modules: Utils, JSONRPCClient');
    </script>
</body>
</html>
